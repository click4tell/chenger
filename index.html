<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="خرید و فروش اندیکاتور سوپرترند، اکسپرت سوپرترند، اکسپرت فارکس فیوری، اکسپرت فیوری، اکسپرت سودآور، اکسپرت پرسود، برنامه متاتریدر، برنامه نویسی ام کیو ال 5، mq5، mq4، metatrader5، forex fury، super trend، forexfury، supertrend، ربات معاملاتی با سود عالی برای فارکس.">
    <meta name="keywords" content="اکسپرت, اندیکاتور, سوپرترند, اکسپرت سوپرترند, اکسپرت فارکس فیوری, اکسپرت فیوری, اکسپرت سودآور, اکسپرت پرسود, برنامه متاتریدر, برنامه نویسی ام کیو ال 5, mq5, mq4, metatrader5, forex fury, super trend, forexfury, supertrend, ربات معاملاتی">
    <title>فروش محصولات SuperTrend برای MT5</title>
    <link rel="icon" type="image/x-icon" href="/logo.ico">
    <style>
        /* Mobile-first CSS */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #FFFFFF;
            color: #333;
            min-height: 100vh;
            direction: ltr;
            text-align: left;
        }

        /* دکمه تعویض زبان با پرچم و متن زیر آن - کاملاً درست */
        .lang-switcher {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
            background: #4CAF50;
            color: white;
            border: none;
            padding: 6px 8px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 12px;
            max-width: 52px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.25);
            transition: all 0.3s ease;
        }
        .lang-switcher:hover { background: #45a049; transform: scale(1.08); }
        .lang-switcher img {
            width: 26px;
            height: 18px;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.4);
        }
        .lang-switcher span {
            font-weight: bold;
            font-size: 10px;
        }

        header {
            position: relative;
            height: 200px;
            overflow: hidden;
            text-align: center;
            padding-top: 80px;
            color: #fff;
        }

        #bgVideo {
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }

        header h1 {
            font-size: 1.8em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            margin: 0;
            color: #4CAF50;
            position: relative;
            z-index: 1;
        }

        header p {
            font-size: 1.2em;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
            color: #FFC107;
            margin: 10px 15px;
            position: relative;
            z-index: 1;
        }

        .container {
            max-width: 100%;
            margin: 10px auto;
            padding: 10px;
            background: #FFFFFF;
            border-radius: 10px;
            box-sizing: border-box;
            text-align: center;
        }

        .product {
            background: #f9f9f9;
            padding: 15px;
            margin: 10px 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #ddd;
        }

        form {
            margin: 15px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 8px;
            border: 1px solid #ddd;
            display: none;
            flex-direction: column;
            gap: 10px;
        }

        #paymentForm, #resetForm {
            display: none;
        }

        input, select, button {
            padding: 10px;
            margin: 5px 0;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        button {
            background: #4CAF50;
            color: white;
            cursor: pointer;
            border: none;
            border-radius: 5px;
        }

        button:hover {
            background: #45a049;
        }

        .container button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #0066cc;
            color: white;
            border: none;
            border-radius: 5px;
        }

        img {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
            display: block;
            margin: 10px auto;
        }

        #result {
            margin: 10px 15px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        h2, h3, p, a {
            text-align: center;
            margin: 10px auto;
        }

        h2 {
            line-height: 1.5;
        }

        p {
            line-height: 1.5;
        }

        a {
            line-height: 1.8;
            display: block;
            color: #0066cc;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        #copyText, #copyCardText {
            cursor: pointer;
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px auto;
            border-radius: 5px;
            width: fit-content;
        }

        footer {
            background-color: #f9fafb;
            padding: 15px 20px;
            text-align: center;
            border-top: 1px solid #e5e7eb;
            box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
            font-family: 'Arial', sans-serif;
            font-size: 14px;
            color: #374151;
            margin-top: 20px;
            width: 100%;
            box-sizing: border-box;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            align-items: center;
            white-space: nowrap;
        }

        footer p {
            margin: 0;
            display: inline-flex;
            align-items: center;
            flex-wrap: nowrap;
        }

        footer a {
            color: #1d4ed8;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: #1e40af;
            text-decoration: underline;
        }

        .separator {
            margin: 0 10px;
            color: #9ca3af;
        }

        @media (max-width: 600px) {
            footer {
                font-size: 12px;
                padding: 10px 15px;
            }

            .footer-container {
                flex-wrap: nowrap;
            }

            .separator {
                margin: 0 5px;
            }
        }
        .separator {
            margin: 0 10px;
            color: #9ca3af;
        }
        .margin-right, .margin-left, .relative-right, .relative-left, .transform-right, .transform-left {
            margin-right: 0;
            margin-left: 0;
            position: static;
            transform: none;
        }

        @media (min-width: 768px) {
            header {
                height: 300px;
                padding-top: 120px;
            }

            header h1 {
                font-size: 2.5em;
            }

            header p {
                font-size: 3em;
            }

            .container {
                max-width: 750px;
                padding: 20px;
            }

            .product {
                margin: 10px auto;
                max-width: 600px;
            }

            form {
                max-width: 500px;
                margin: 20px auto;
            }

            input, select, button {
                max-width: 300px;
                font-size: 18px;
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 1200px;
            }

            header h1 {
                font-size: 2em;
            }

            header p {
                font-size: 2em;
            }
        }
        .download-button {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px;
            background-color: #1d4ed8;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-family: 'Arial', sans-serif;
            font-size: 14px;
            transition: background-color 0.3s ease;
        }

        .download-button:hover {
            background-color: #1e40af;
        }

        .video-container {
            max-width: 100%;
            margin: 20px auto;
            padding: 10px;
            text-align: center;
        }

        video {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .preview {
            cursor: pointer;
            max-width: 300px;
            margin: 10px;
        }

        .image-preview {
            max-height: 200px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .video-preview {
            max-height: 200px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .images-container, .videos-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.95);
            padding: 0;
        }

        .modal-content {
            margin: auto;
            display: block;
            width: 95%;
            max-width: 95vw;
            height: 95%;
            max-height: 95vh;
            object-fit: contain;
            transition: transform 0.3s ease;
            transform-origin: center center;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1);
            cursor: grab;
        }

        .modal-content:active {
            cursor: grabbing;
        }

        .modal-content.zoomed {
            transform: translate(-50%, -50%) scale(1.5);
        }

        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            z-index: 10001;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        .caption {
            font-size: 14px;
            margin-top: 5px;
            color: #555;
            text-align: center;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            min-width: 250px;
            padding: 12px 16px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            z-index: 1001;
            transform: translateX(300px);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.loading {
            background-color: #FFC107;
        }

        .toast.success {
            background-color: #4CAF50;
        }

        .toast.error {
            background-color: #f44336;
        }

        .payment-method {
            display: flex;
            gap: 10px;
        }

        .payment-method input[type="radio"] {
            width: auto;
        }

        .payment-method label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        #trxDetails {
            display: block;
        }

        #cardCopySection {
            display: none;
        }

        #cardDetails {
            display: none;
        }

        .modal:-webkit-full-screen {
            width: 100%;
            height: 100%;
        }

        .modal:-moz-full-screen {
            width: 100%;
            height: 100%;
        }

        .modal:fullscreen {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <!-- دکمه تعویض زبان با پرچم - کاملاً صحیح -->
    <button class="lang-switcher" onclick="toggleLanguage()">
        <img src="/ir.svg" alt="English" id="flag-gb">
        <img src="/gb.svg" alt="فارسی" id="flag-ir" style="display:none;">
        <span id="lang-text">فارسی</span>
    </button>

    <header>
        <video autoplay muted loop id="bgVideo">
            <source src="/logo.webm" type="video/webm">
            مرورگر شما از ویدیو پشتیبانی نمی‌کند.
        </video>
        <h1 class="relative-right" data-fa="متاتریر 5 و ربات اتوماتیک معاملات فارکس و اندیکاتور" data-en="METATRADER 5 , MQL5 , MQ5 , EXPERT . INDICATOR">METATRADER 5 , MQL5 , MQ5 , EXPERT . INDICATOR</h1>
        <p class="margin-left" data-fa="فروش محصولات اکسپرت واندیکاتور متاتریدر فارکس با سود عالی" data-en="Selling Expert and Indicator Products for MT5 Forex with High Profit">Selling Expert and Indicator Products for MT5 Forex with High Profit</p>
    </header>

    <div class="container">
               <h1 id="productsTitle" data-fa="محصولات ما" data-en="Our Products">Our Products</h1>

        <button onclick="window.open('/info.pdf', '_blank')" data-fa="info SUPERTREND" data-en="info SUPERTREND">info SUPERTREND</button>
        <button onclick="window.open('/ForexFuryPro.pdf', '_blank')" data-fa="info FOREXFURY" data-en="info FOREXFURY">info FOREXFURY</button>
        <button onclick="window.open('/ReportTester.pdf', '_blank')" data-fa="Riport FOREXFURY" data-en="Report FOREXFURY">Report FOREXFURY</button>
    </div>

    <div class="product" id="productContainer">
        <!-- Products will be dynamically loaded here -->
    </div>

    <div class="container">
        <button onclick="showPaymentForm()" data-fa="فرم دریافت اطلاعات برای پرداخت و خرید محصول" data-en="Payment and Purchase Form">Payment and Purchase Form</button>
    </div>

    <form id="paymentForm">
        <div id="trxDetails">
            <h3 data-fa="کادر زیر آدرس ترون ما جهت خرید شماست کلیک کنید آدرس کپی میشود" data-en="Click below to copy our Tron address for purchase">Click below to copy our Tron address for purchase</h3>
            <p id="copyText" onclick="copyToClipboard()" data-fa="TLBTbV3cjeR7GJU7321Q42Bjft4ZUDzVca" data-en="TLBTbV3cjeR7GJU7321Q42Bjft4ZUDzVca">TLBTbV3cjeR7GJU7321Q42Bjft4ZUDzVca</p>
            <label data-fa="هش تراکنش (txHash) را که پس از انتقال ارز گرفتید اینجا جاگذاری کنید:" data-en="Enter txHash after transfer:">Enter txHash after transfer:</label>
            <input type="text" name="txHashTrx" id="txHashTrx"><br>
            <label data-fa="مبلغ به تتر:" data-en="Amount in Teter:">Amount in USDT:</label>
            <input type="number" name="amountTeter" id="amountTeter" readonly><br>
        </div>

        <div id="cardCopySection">
            <h3 data-fa="کادر زیر شماره کارت ما جهت خرید شماست کلیک کنید شماره کپی میشود" data-en="Click below to copy our Bank Card number for purchase">Click below to copy our Bank Card number for purchase</h3>
            <p id="copyCardText" onclick="copyCardToClipboard()" data-fa="6219861903732864" data-en="6219861903732864">6219861903732864</p>
             <label data-fa="کد پیگیری یا شماره کارت یا شناسه پرداخت که از طریق آن واریزی داشتید وارد کنید" data-en="Enter cart number after transfer:">Enter the card number or transaction ID used for payment</label>
             <input type="text" name="txHashCard" id="txHashCard"><br>
        </div>

        <div id="cardDetails">
            <label data-fa="مبلغ به ریال:" data-en="Amount in Rial:">Amount in IRR:</label>
            <input type="number" name="amountRial" id="amountRial" readonly><br>
        </div>

        <label data-fa="روش پرداخت:" data-en="Payment Method:">Payment Method:</label>
        <div class="payment-method">
            <label><input type="radio" name="paymentMethod" value="trx" checked onchange="togglePaymentDetails()"> <span data-fa="ترون (TRX)" data-en="Tron (TRX)"></span></label>
            <label><input type="radio" name="paymentMethod" value="card" onchange="togglePaymentDetails()"> <span data-fa="کارت بانکی" data-en="Bank Card"></span></label>
        </div>

        <label data-fa="محصول:" data-en="Product:">Product:</label>
        <select name="product" id="productSelect" required onchange="updateAmounts()">
            <!-- Options will be dynamically loaded -->
        </select><br>
        <label data-fa="شماره اکانت MT5:" data-en="MT5 Account Number:">MT5 Account Number:</label>
        <input type="number" name="account" required><br>
        <label data-fa="ایمیل:" data-en="Email:">Email:</label>
        <input type="email" name="email" required><br>
        <button type="submit" data-fa="پس از پرداخت و انتخاب محصول و وارد کردن شماره اکانت کلیک کنید" data-en="Submit After Payment">Submit After Payment</button>
   
    <div id="result"></div>

 </form>
    <h2 data-fa="نمودار عملکرد محصولات در محیط بک تست پلتفرم متاتریدر" data-en="Product Performance Charts in MT5 Backtest">Product Performance Charts in MT5 Backtest</h2>

    <div class="images-container">
        <div>
            <img src="/profit_graph.png" alt="Profit Graph" class="preview image-preview" onclick="openFullScreenModal('/profit_graph.png')" style="cursor: zoom-in;">
           <p class="caption" data-fa=" بکتست اکسپرت فارکس فیوری با سه ملیون دلار سود از 100 دلار " data-en="forex Fury Expert Backtests 100$ to 3.000.000$">forex Fury Expert Backtests 100$ to 3.000.000$</p>        </div>
        <div>
            <img src="/indicator_chart.png" alt="Indicator Chart" class="preview image-preview" onclick="openFullScreenModal('/indicator_chart.png')" style="cursor: zoom-in;">
           <p class="caption" data-fa="داشبورد سوپرترند معاملات دستی و اتوماتیک در چارت" data-en="Doshboard for Trade Manual & Automatic in Chart">Doshboard for Trade Manual & Automatic in Chart</p>
        </div>
    </div>

    <div class="container">
        <h2 data-fa="نمایش ویدیوهای محصولات" data-en="Product Video Demos">Product Video Demos</h2>
        <div class="videos-container">
 <div>
                <video src="/ForexFuryPro.webm" class="preview video-preview" controls autoplay muted loop poster="" onclick="openVideoModal('/ForexFuryPro.webm')" style="cursor: zoom-in;">
                    مرورگر شما از ویدیو پشتیبانی نمی‌کند.
                </video>
               <p class="caption" data-fa=" اکسپرت معاملات اتوماتیک فارکس فیوری پرو " data-en="Forex  Fury  Pro Expert">Forex  Fury  Pro Expert</p>
            </div>
            <div>
                <video src="/supertrend.webm" class="preview video-preview" controls autoplay muted loop poster="" onclick="openVideoModal('/supertrend.webm')" style="cursor: zoom-in;">
                    مرورگر شما از ویدیو پشتیبانی نمی‌کند.
                </video>
                               <p class="caption" data-fa="اکسپرت یا ربات معاملاتی اتوماتیک سوپرترند" data-en="Expert (Robat) SuperTrend  Auto Trade">Expert (Robat) SuperTrend  Auto Trade</p>
            </div>
            <div>
                <video src="/EA&EM-SuperTrend&Footprint.webm" class="preview video-preview" controls autoplay muted loop poster="" onclick="openVideoModal('/EA&EM-SuperTrend&Footprint.webm')" style="cursor: zoom-in;">
                    مرورگر شما از ویدیو پشتیبانی نمی‌کند.
                </video>
                <p class="caption" data-fa="اکسپرت اتوماتیک و دستی معاملات سوپرترند و فوت پرینت " data-en="EA&EM-SuperTrend&Footprint">EA&EM-SuperTrend&Footprint</p>
            </div>
        </div>
    </div>

    <h2 data-fa="دانلود فایل‌ها" data-en="Download Files">Download Files</h2>
    <div class="container">
       <a href="/EA&EM-SuperTrend&Footprint.ex5" download class="download-button" data-fa="ربات معاملات دستی و اتوماتیک " data-en="EA&EM-SuperTrend&Footprint">EA&EM-SuperTrend&Footprint</a>
        <a href="/SuperTrend_EA.ex5" download class="download-button" data-fa="ربات سوپرترند" data-en="Expert Super Trend">Expert Super Trend</a>
        <a href="/ForexFuryPro.ex5" download class="download-button" data-fa="ربات فارکس فیوری" data-en="Expert Forex Fury">Expert Forex Fury</a>
    </div>
    <div class="container">
        <button onclick="window.open('https://t.me/Mq5_EA_bot','_blank')" data-fa="ورود به لینک تلگرام برای خرید" data-en="Enter Telegram Link for Purchase">Enter Telegram Link for Purchase</button>
    </div>

    <div class="container">
        <a href="contact.html" data-fa="تماس با ما" data-en="Contact Us" style="display: inline-block; padding: 10px 20px; background-color: #0066cc; color: white; text-decoration: none; border-radius: 5px; font-size: 16px;">Contact Us</a>
    </div>

    <div id="myModal" class="modal">
        <span class="close" onclick="closeModal()">×</span>
        <img class="modal-content" id="imgModal">
        <video class="modal-content" id="videoModal" controls style="display:none;"></video>
    </div>

    <div id="toast"></div>

    <footer>
        <div class="footer-container">
            <p data-fa="© All rights reserved K_M 2025 | info@tsgcoltd.ir" data-en="© All rights reserved K_M 2025 | info@tsgcoltd.ir">© All rights reserved K_M 2025 <span class="separator">|</span> <a href="/cdn-cgi/l/email-protection#c1a8afa7ae81b5b2a6a2aeadb5a5efa8b3"><span class="__cf_email__" data-cfemail="3a53545c557a4e495d5955564e5e145348">[email&#160;protected]</span></a></p>
        </div>
    </footer>
 <script>
    const workerUrl = 'https://tetercheng.click4tell.workers.dev/price';  // URL کامل Worker

    async function updateNow() {
      document.getElementById('price').innerHTML = 'در حال دریافت...';
      document.getElementById('price').className = 'price loading';
      
      try {
        const res = await fetch(workerUrl + '?' + Date.now());  // کش مرورگر رو دور بزن
        
        if (!res.ok) throw new Error('پاسخ Worker نامعتبر');
        
        const data = await res.json();

        const price = data.tether_price_toman || 114000;
        
        document.getElementById('price').innerHTML = 
          price.toLocaleString('fa-IR') + 
          ' <span class="toman">تومان</span>';
        document.getElementById('price').className = 'price';
        
        document.getElementById('source').textContent = `منبع: ${data.source || 'نامشخص'}`;
        
        const fb = document.getElementById('fallback');
        if (data.fallback_used > 0) {
          fb.textContent = `از منبع جایگزین استفاده شد (${data.fallback_used} بار)`;
          fb.style.display = 'block';
        } else {
          fb.style.display = 'none';
        }
        
        document.getElementById('time').textContent = new Date().toLocaleString('fa-IR');
        
      } catch (err) {
        document.getElementById('price').innerHTML = '114,000 <span class="toman">تومان</span>';
        document.getElementById('source').textContent = 'خطا در اتصال به Worker - قیمت پیش‌فرض';
        document.getElementById('price').className = 'price';
        console.error('خطا:', err);
      }
    }

    // اولین بار و هر ۱۵ ثانیه
    updateNow();
    setInterval(updateNow, 15000);

    <script>
        let currentLang = 'en'; // پیش‌فرض انگلیسی

        let WORKER_URL = currentLang === 'fa' ? 'https://supertrend-worker-fa.click4tell.workers.dev' : 'https://supertrend-worker-en.click4tell.workers.dev';

        const translations = {
            fa: { title: "فروش اندیکاتور و اکسپرت " },
            en: { title: "Selling  Indicators and Experts" },
        };

        let products = {};
        let cardDetails = {};

        async function fetchProductsAndCard() {
            try {
                const response = await fetch(`${WORKER_URL}/products?lang=${currentLang}`);
                products = await response.json();
                populateProducts();
                populateProductSelect();

                const cardResponse = await fetch(`${WORKER_URL}/card-details?lang=${currentLang}`);
                cardDetails = await cardResponse.json();
                updateCardDisplay();
            } catch (error) {
                console.error('Error fetching data:', error);
                products = {
                    'EA&EM-SuperTrend&Footprint': { name_fa: 'اکسپرت EA&EM-SuperTrend&Footprint', name_en: 'EA&EM-SuperTrend&Footprint', desc_fa: 'توضیح: اندیکاتور پیشرفته برای شناسایی روندها در MT5.', desc_en: 'Description: Advanced indicator for trend identification in MT5.', trx: 15,rial: 'price'*trx },
                    'EA_SuperTrend': { name_fa: 'اکسپرت SuperTrend EA', name_en: 'SuperTrend EA Expert', desc_fa: 'توضیح: اکسپرت اتوماتیک بر اساس اندیکاتور SuperTrend با مدیریت ریسک.', desc_en: 'Description: Automatic expert based on SuperTrend indicator with risk management.', trx: 200, rial: 'price' },
                    'EA_ForexFury': { name_fa: 'اکسپرت ForexFury EA', name_en: 'ForexFury EA Expert', desc_fa: 'توضیح:اکسپرت اتوماتیک بر اساس تکنیک فارکس فیوری با سود بسیار بالا حتی 200 هزار دلار در سال با دیپوزیت 100 دلار', desc_en: 'Description: Automatic expert based on Forex Fury technique with very high profit, even $200,000/year on $100 deposit', trx: 500, rial: 'price' }
                };
                cardDetails = { number: '6219861903732864', name: 'Kamran Mankarsi', bank: 'Saman Bank' };
                populateProducts();
                populateProductSelect();
                updateCardDisplay();
            }
        }

        function populateProducts() {
            const container = document.getElementById('productContainer');
            container.innerHTML = '';
            Object.keys(products).forEach(key => {
                const prod = products[key];
                const div = document.createElement('div');
                div.innerHTML = `
                    <h3 data-fa="${prod.name_fa}" data-en="${prod.name_en}">${currentLang === 'fa' ? prod.name_fa : prod.name_en}</h3>
                    <p data-fa="${prod.desc_fa}" data-en="${prod.desc_en}">${currentLang === 'fa' ? prod.desc_fa : prod.desc_en}</p>
                    <p data-fa="قیمت: ${prod.trx} TRX ترون  روی شبکه TRC_20 | معادل ${prod.rial.toLocaleString()} ریال" data-en="Price: ${prod.trx} TRX on TRC_20 network | Equivalent ${prod.rial.toLocaleString()} IRR">${currentLang === 'fa' ? `قیمت: ${prod.trx} TRX ترون  روی شبکه TRC_20 | معادل ${prod.rial.toLocaleString()} ریال` : `Price: ${prod.trx} TRX on TRC_20 network | Equivalent ${prod.rial.toLocaleString()} IRR`}</p>
                `;
                container.appendChild(div);
            });
            updateLanguage(currentLang);
        }

        function populateProductSelect() {
            const select = document.getElementById('productSelect');
            const currentValue = select.value;
            select.innerHTML = '';
            Object.keys(products).forEach(key => {
                const prod = products[key];
                const option = document.createElement('option');
                option.value = key;
                option.textContent = currentLang === 'fa' ? prod.name_fa : prod.name_en;
                select.appendChild(option);
            });
            select.value = currentValue || Object.keys(products)[0];
            updateAmounts();
        }

        function updateAmounts() {
            const select = document.getElementById('productSelect');
            const product = select.value;
            if (product && products[product]) {
                document.getElementById('amountTeter').value = products[product].trx;
                document.getElementById('amountRial').value = products[product].rial;
            }
        }

        function updateCardDisplay() {
            const copyCardText = document.getElementById('copyCardText');
            if (copyCardText) {
                copyCardText.textContent = cardDetails.number;
                copyCardText.setAttribute('data-fa', cardDetails.number);
                copyCardText.setAttribute('data-en', cardDetails.number);
            }
        }

        function togglePaymentDetails() {
            const method = document.querySelector('input[name="paymentMethod"]:checked').value;
            document.getElementById('trxDetails').style.display = method === 'trx' ? 'block' : 'none';
            document.getElementById('cardCopySection').style.display = method === 'card' ? 'block' : 'none';
            document.getElementById('cardDetails').style.display = method === 'card' ? 'block' : 'none';
        }

        function showPaymentForm() {
            const paymentForm = document.getElementById('paymentForm');
            paymentForm.style.display = 'block';
            paymentForm.scrollIntoView({ behavior: 'smooth' });
            togglePaymentDetails();
        }

        function copyToClipboard() {
            navigator.clipboard.writeText(document.getElementById('copyText').innerText)
                .then(() => alert(currentLang === 'fa' ? 'آدرس کپی شد!' : 'Address copied!'));
        }

        function copyCardToClipboard() {
            navigator.clipboard.writeText(document.getElementById('copyCardText').innerText)
                .then(() => alert(currentLang === 'fa' ? 'شماره کارت کپی شد!' : 'Card number copied!'));
        }

        function updateLanguage(lang) {
            currentLang = lang;
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'fa' ? 'rtl' : 'ltr';
            document.body.style.direction = lang === 'fa' ? 'rtl' : 'ltr';
            document.body.style.textAlign = lang === 'fa' ? 'right' : 'left';

            WORKER_URL = lang === 'fa' ? 'https://supertrend-worker-fa.click4tell.workers.dev' : 'https://supertrend-worker-en.click4tell.workers.dev';

            document.querySelectorAll('[data-fa]').forEach(el => {
                el.textContent = el.getAttribute(`data-${lang}`);
            });

            document.title = translations[lang].title;

            // تعویض پرچم و متن دکمه
            document.getElementById('flag-gb').style.display = lang === 'en' ? 'block' : 'none';
            document.getElementById('flag-ir').style.display = lang === 'fa' ? 'block' : 'none';
            document.getElementById('lang-text').textContent = lang === 'en' ? 'فارسی' : 'English';

            localStorage.setItem('lang', lang);
            populateProductSelect();
            fetchProductsAndCard();
        }

        function toggleLanguage() {
            updateLanguage(currentLang === 'en' ? 'fa' : 'en');
        }

        const savedLang = localStorage.getItem('lang') || 'en';
        updateLanguage(savedLang);

        let titleText = currentLang === 'fa' ? "فروش اندیکاتور و اکسپرت معاملات اتوماتیک فارکس " : "Selling SuperTrend Indicators and Experts";
        let titleIndex = 0;
        setInterval(() => {
            document.title = titleText.substring(titleIndex) + titleText.substring(0, titleIndex);
            titleIndex = (titleIndex + 1) % titleText.length;
        }, 200);

        document.getElementById('paymentForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const method = formData.get('paymentMethod');
            const endpoint = method === 'card' ? '/card-process' : '/process';
            try {
                const response = await fetch(`${WORKER_URL}${endpoint}`, { method: 'POST', body: formData });
                const result = await response.text();
                document.getElementById('result').innerHTML = result;
            } catch (error) {
                document.getElementById('result').innerHTML = currentLang === 'fa' ? 'خطا: ' + error.message : 'Error: ' + error.message;
            }
        });

        let zoomLevel = 1;
        let isDragging = false;
        let startX, startY, translateX = 0, translateY = 0;
        let currentContent = null;

        function openFullScreenModal(src) {
            const modal = document.getElementById("myModal");
            const modalImg = document.getElementById("imgModal");
            const modalVideo = document.getElementById("videoModal");
            modal.style.display = "block";
            modalImg.src = src;
            modalImg.style.display = "block";
            modalVideo.style.display = "none";
            currentContent = modalImg;
            initZoom(modalImg);
            attachEventListeners(modalImg);
            document.body.style.overflow = 'hidden';
            enterFullScreen(modal);
        }

        function enterFullScreen(element) {
            if (element.requestFullscreen) element.requestFullscreen();
            else if (element.webkitRequestFullscreen) element.webkitRequestFullscreen();
            else if (element.msRequestFullscreen) element.msRequestFullscreen();
        }

        function exitFullScreen() {
            if (document.exitFullscreen) document.exitFullscreen();
            else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
            else if (document.msExitFullscreen) document.msExitFullscreen();
        }

        function openVideoModal(src) {
            const modal = document.getElementById("myModal");
            const modalImg = document.getElementById("imgModal");
            const modalVideo = document.getElementById("videoModal");
            modal.style.display = "block";
            modalVideo.src = src;
            modalVideo.style.display = "block";
            modalImg.style.display = "none";
            modalVideo.play();
            currentContent = modalVideo;
            initZoom(modalVideo);
            attachEventListeners(modalVideo);
            document.body.style.overflow = 'hidden';
        }

        function initZoom(element) {
            zoomLevel = 1;
            translateX = 0;
            translateY = 0;
            updateTransform(element);
        }

        function attachEventListeners(element) {
            const handleWheel = (e) => { e.preventDefault(); const delta = e.deltaY > 0 ? 0.9 : 1.1; zoomLevel *= delta; zoomLevel = Math.min(Math.max(0.1, zoomLevel), 10); updateTransform(element); };
            const handleClick = () => { zoomLevel = zoomLevel <= 1 ? 2 : (zoomLevel < 4 ? 4 : 1); updateTransform(element); };
            const handleMouseDown = (e) => { if (zoomLevel <= 1) return; isDragging = true; startX = e.clientX - translateX; startY = e.clientY - translateY; element.style.cursor = 'grabbing'; };
            const handleMouseMove = (e) => { if (!isDragging) return; translateX = e.clientX - startX; translateY = e.clientY - startY; updateTransform(element); };
            const handleMouseUp = () => { isDragging = false; element.style.cursor = 'grab'; };

            element.addEventListener('wheel', handleWheel, { passive: false });
            element.addEventListener('click', handleClick);
            element.addEventListener('mousedown', handleMouseDown);
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', handleMouseUp);

            element._listeners = { wheel: handleWheel, click: handleClick, mousedown: handleMouseDown, mousemove: handleMouseMove, mouseup: handleMouseUp };
        }

        function updateTransform(element) {
            element.style.transform = `translate(-50%, -50%) scale(${zoomLevel}) translate(${translateX}px, ${translateY}px)`;
        }

        function closeModal() {
            const modal = document.getElementById("myModal");
            const modalVideo = document.getElementById("videoModal");
            modal.style.display = "none";
            modalVideo.pause();
            modalVideo.currentTime = 0;
            document.body.style.overflow = 'auto';
            exitFullScreen();
            if (currentContent && currentContent._listeners) {
                currentContent.removeEventListener('wheel', currentContent._listeners.wheel);
                currentContent.removeEventListener('click', currentContent._listeners.click);
                document.removeEventListener('mousemove', currentContent._listeners.mousemove);
                document.removeEventListener('mouseup', currentContent._listeners.mouseup);
                currentContent.removeEventListener('mousedown', currentContent._Listeners.mousedown);
                delete currentContent._listeners;
            }
            currentContent = null;
        }

        window.onclick = function(event) {
            const modal = document.getElementById('myModal');
            if (event.target == modal) closeModal();
        };

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeModal();
        });

        function showToast(message, type) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type} show`;
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        window.addEventListener('load', () => {
            fetchProductsAndCard();
        });
    </script>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"d5269743a1f74898a14eb9858a16d753","r":1}' crossorigin="anonymous"></script>
</body>
</html>

